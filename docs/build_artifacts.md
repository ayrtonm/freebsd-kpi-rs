# Build Artifacts

A successful build will produce the following artifacts in the same directory as the kernel.
By default this is `/$MAKEOBJDIRPREFIX/path/to/sys/$KERNCONF/` and `$MAKEOBJDIRPREFIX` defaults to
`/usr/obj`.

* `rust_sysroot` directory
    * `libcore.rlib` - rust core crate built from the sources in the compiler repo
    * `libcompiler_builtins.rlib` - a dummy rlib required by the compiler
* `bindings.rs` - declarations and type definitions generated by bindgen from bindings.h. Built into
                  the KPI crate.
* `bindgen_inlines.c` - source file generated by bindgen for static inline functions. This gets
                        included by inlines.c instead of getting built directly.
* `inlines.{c,o}` - source file generated by kern.rust.mk concatenating preprocessor defines passed
                    to bindgen with bindgen_inlines.c. This gets built normally and linked into the
                    kernel.
* `libkpi.rlib` - the KPI crate's code
* `rustroot.rs` - source file with one `extern crate` declaration per crate
* `rustroot.a` - the top-level static archive that gets linked into the kernel

For each crate `foo` added there will also be a `libfoo.rlib` in the build directory. Rlibs are just
static archives (.a files) with additional rust-specific metadata. This means that tools like
readelf, objdump and nm will work as usual. To demangle symbols these tools usually accept a `-C`
flag.
